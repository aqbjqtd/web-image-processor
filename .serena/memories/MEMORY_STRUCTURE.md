# Web Image Processor - 项目记忆结构说明

**更新时间**: 2026-02-15
**记忆版本**: v2.0
**状态**: ✅ 已重建

---

## 📁 记忆文件结构

### 当前记忆文件

```
.serena/memories/
├── project-master-record.md              # 项目主记录（21KB）
├── development-session-2026-02-15.md    # 2026-02-15开发会话（16KB）
└── archive/                            # 归档记忆（19个旧文件）
    ├── 2026-01-07-development-session.md
    ├── 2026-01-17-development-session.md
    ├── milestone-v1.1.0-code-refactoring.md
    ├── current-status.md
    ├── development-progress.md
    ├── project-metadata.md
    └── ...（其他旧记忆）
```

---

## 🎯 记忆设计原则

### 1. 单一主记录

**文件**: `project-master-record.md`

**目的**: 作为项目的主要参考文档，包含所有关键信息

**内容**:
- 项目标识和概述
- 技术栈详情
- 完整项目结构
- 核心模块详解
- 代码质量现状（68/70）
- Docker部署信息
- Git仓库状态
- 性能指标
- 开发命令速查
- 技术决策记录
- 常见问题

**特点**:
- ✅ `auto_load: true` - 自动加载
- ✅ `priority: core` - 核心优先级
- ✅ `type: master-record` - 主记录类型
- ✅ 21KB，信息密度高

### 2. 开发会话记录

**文件**: `development-session-2026-02-15.md`

**目的**: 记录具体的开发会话和成果

**内容**:
- 会话目标和任务
- 代码质量提升详情
- 核心修复说明
- 文件变更记录
- Docker部署过程
- Git提交记录
- 测试覆盖统计
- 性能基准数据
- 技术亮点总结
- 经验教训

**特点**:
- ✅ 按日期命名，易于追溯
- ✅ `priority: important` - 重要优先级
- ✅ `type: session` - 会话类型
- ✅ 16KB，详细记录

### 3. 归档记忆

**目录**: `archive/`

**目的**: 保留历史记忆，避免主目录混乱

**内容**:
- 旧的开发会话记录
- 历史里程碑记录
- 旧的状态和进度文件
- 历史技术决策

**特点**:
- ✅ 保留完整历史
- ✅ 不影响主记忆搜索
- ✅ 需要时可查阅

---

## 🔍 搜索策略

### 语义搜索关键词

#### 项目概览
```typescript
["项目概览", "技术栈", "Vue3", "TypeScript", "Quasar"]
```

#### 代码质量
```typescript
["代码质量", "68/70", "优化", "重构", "类型安全"]
```

#### 核心功能
```typescript
["图像处理", "压缩算法", "Worker", "缓存", "内存管理"]
```

#### 部署相关
```typescript
["Docker", "部署", "镜像", "94.2MB", "生产就绪"]
```

#### 开发相关
```typescript
["开发命令", "npm", "构建", "测试", "版本管理"]
```

### 搜索示例

```bash
# 搜索项目概览
"Web Image Processor 项目概述 技术栈"

# 搜索代码质量
"代码质量 68/70 优化成果"

# 搜索核心功能
"图像处理 压缩算法 ImageProcessor"

# 搜索部署信息
"Docker 镜像部署 94.2MB"

# 搜索开发命令
"npm run dev 构建测试"
```

---

## 📊 记忆统计

### 主记录统计

- **文件大小**: 21KB
- **章节数**: 15个
- **代码示例**: 20+个
- **表格**: 10+个
- **链接**: 30+个

### 开发会话统计

- **文件大小**: 16KB
- **核心修复**: 5个
- **新增文件**: 9个
- **修改文件**: 32个
- **代码示例**: 15+个

### 归档统计

- **归档文件**: 19个
- **总大小**: ~150KB
- **时间跨度**: 2026-01-07 至 2026-01-17

---

## 🔄 记忆更新策略

### 自动加载

**主记录** (`project-master-record.md`):
- ✅ `auto_load: true`
- ✅ 每次会话自动加载
- ✅ 提供完整项目上下文

**开发会话** (`development-session-*.md`):
- ⚠️ `auto_load: false`
- ⚠️ 按需加载
- ⚠️ 提供特定会话详情

### 更新频率

| 文件类型 | 更新频率 | 触发条件 |
|---------|---------|---------|
| **主记录** | 每月或重大更新 | 版本发布、架构变更 |
| **开发会话** | 每次开发会话 | 完成重要开发任务 |
| **归档** | 每月或大版本 | 记忆重组、版本升级 |

### 更新流程

```bash
# 1. 创建新的开发会话记录
development-session-YYYY-MM-DD.md

# 2. 更新主记录（如有重大变更）
project-master-record.md

# 3. 归档旧记忆（可选）
mv .serena/memories/old-file.md .serena/memories/archive/

# 4. 验证记忆
cat .serena/memories/*.md
```

---

## 📋 记忆质量标准

### 主记录质量标准

- ✅ **完整性**: 覆盖项目所有关键方面
- ✅ **准确性**: 信息准确，及时更新
- ✅ **可读性**: 结构清晰，易于阅读
- ✅ **可搜索性**: 丰富的关键词和标签
- ✅ **可维护性**: 易于更新和扩展

### 开发会话质量标准

- ✅ **时间记录**: 明确的会话时间
- ✅ **目标明确**: 清晰的开发目标
- ✅ **成果量化**: 可量化的成果数据
- ✅ **技术细节**: 详细的技术说明
- ✅ **经验总结**: 经验教训和改进建议

---

## 🎯 使用建议

### 新会话开始时

1. **自动加载主记录**: `project-master-record.md`
   - 获取项目概览
   - 了解技术栈
   - 查看代码质量现状

2. **按需加载开发会话**: `development-session-*.md`
   - 查看最近的开发成果
   - 了解技术决策
   - 学习经验教训

3. **搜索归档记忆**:
   - 查找历史信息
   - 对比当前状态
   - 参考过去决策

### 开发过程中

1. **记录重要决策**:
   - 技术选型
   - 架构设计
   - 性能优化

2. **量化成果**:
   - 代码质量指标
   - 性能测试数据
   - 文件变更统计

3. **总结经验**:
   - 成功经验
   - 失败教训
   - 改进建议

### 会话结束时

1. **创建会话记录**:
   - 总结开发成果
   - 记录技术亮点
   - 更新项目状态

2. **更新主记录**（如需要）:
   - 更新版本信息
   - 更新代码质量
   - 更新技术栈

3. **归档旧记忆**（如需要）:
   - 避免记忆过多
   - 保持结构清晰

---

## 🔧 故障排查

### 记忆未找到

**问题**: 搜索时找不到记忆

**解决方案**:
1. 检查记忆文件是否存在: `ls .serena/memories/`
2. 检查文件格式: `cat .serena/memories/*.md | head -20`
3. 检查YAML frontmatter: 确保有`title`, `summary`, `tags`
4. 尝试不同的关键词

### 记忆信息过时

**问题**: 记忆中的信息与当前状态不符

**解决方案**:
1. 检查记忆更新时间: `updated_at`字段
2. 对比当前代码状态
3. 更新记忆文件
4. 添加更新时间戳

### 记忆文件过大

**问题**: 记忆文件太大，加载慢

**解决方案**:
1. 归档旧记忆到`archive/`目录
2. 拆分大型记忆文件
3. 使用摘要代替详细内容
4. 删除不必要的重复信息

---

## 📞 联系方式

**项目负责人**: Web Image Processor 开发团队
**记忆维护者**: Claude (Sisyphus)
**最后更新**: 2026-02-15
**下次审核**: 2026-03-15

---

## 附录：记忆模板

### 主记录模板

```markdown
---
title: "项目名称 - 项目主记录"
priority: core
type: master-record
tags: ["关键词1", "关键词2", "关键词3"]
created_at: "YYYY-MM-DD"
updated_at: "YYYY-MM-DD"
auto_load: true
summary: "简短摘要"
project_id: "project-id"
version: "1.0.0"
status: "production"
---

# 项目名称 - 项目主记录

## 项目标识
## 项目概述
## 技术栈
## 项目结构
## 核心模块
## ...
```

### 开发会话模板

```markdown
---
title: "开发会话记录 - YYYY-MM-DD"
priority: important
type: session
tags: ["关键词1", "关键词2"]
created_at: "YYYY-MM-DD"
updated_at: "YYYY-MM-DD"
auto_load: false
summary: "简短摘要"
session_type: "开发类型"
duration_hours: X
participants: ["开发者"]
status: "已完成"
---

# 开发会话记录 - YYYY-MM-DD

## 🎯 会话目标
## 📊 成果总结
## 📁 文件变更
## 💡 技术亮点
## 🎓 经验总结
## 🚀 下一步计划
```

---

**文档版本**: v2.0
**最后更新**: 2026-02-15
**维护状态**: ✅ 活跃维护
