import{c as ge,a0 as ft,a1 as Ot,a2 as $t,a3 as Ht,a4 as Ze,a5 as Ut,a6 as et,a7 as Nt,a as y,a8 as fl,g as qe,h as k,Q as pe,a9 as vl,aa as ml,Z as me,ab as hl,ac as gl,r as q,I as vt,k as yl,b as tt,O as Sl,R as pl,s as bl,S as wl,T as kl,U as dt,V as _l,W as Cl,X as xl,w as he,ad as ql,ae as zl,af as Ml,ag as Mt,t as Vl,ah as Al,Y as Qt,d as lt,ai as Il,aj as Bl,ak as El,n as Pl,e as Se,al as Fl,am as Dl,an as Tl,ao as Rl,ap as Ll,aq as Ol,ar as Vt,as as He,at as $l,au as Hl,J as ut,av as Ul,aw as Fe,ax as Nl,ay as jt,A as Wt,i as Ql,o as Kt,az as jl,aA as rt,aB as Wl,aC as Kl,aD as Jl,_ as Gl,C as le,D as xe,E as G,aE as A,F as P,aF as ue,aG as ye,aH as Xl,H as ve,aI as Yl,aJ as De,aK as Ge,aL as Te,aM as Zl,G as ea,aN as ta,aO as la,aP as aa,aQ as At,aR as na}from"./index.80d4ac4e.js";import{u as oa,v as It,a as ia,b as ua,c as ra,p as Bt,r as Et,s as sa,d as ca,Q as da}from"./QTooltip.64bc24aa.js";import{Q as fa}from"./QSpace.b0e28ce6.js";import{Q as va}from"./QPage.a22494d8.js";import{u as ma}from"./use-quasar.552bfc48.js";var ha=ge({name:"QField",inheritAttrs:!1,props:{...ft,tag:{type:String,default:"label"}},emits:Ot,setup(){return $t(Ht({tagProp:!0}))}});const ga={xs:8,sm:10,md:14,lg:20,xl:24};var ya=ge({name:"QChip",props:{...Ze,...Ut,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:n}){const{proxy:{$q:u}}=qe(),i=et(e,u),o=Nt(e,ga),d=y(()=>e.selected===!0||e.icon!==void 0),r=y(()=>e.selected===!0?e.iconSelected||u.iconSet.chip.selected:e.icon),f=y(()=>e.iconRemove||u.iconSet.chip.remove),p=y(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),c=y(()=>{const b=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(b?` text-${b} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(p.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(i.value===!0?" q-chip--dark q-dark":"")}),m=y(()=>{const b=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},L={...b,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||u.lang.label.remove};return{chip:b,remove:L}});function v(b){b.keyCode===13&&C(b)}function C(b){e.disable||(n("update:selected",!e.selected),n("click",b))}function M(b){(b.keyCode===void 0||b.keyCode===13)&&(me(b),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function D(){const b=[];p.value===!0&&b.push(k("div",{class:"q-focus-helper"})),d.value===!0&&b.push(k(pe,{class:"q-chip__icon q-chip__icon--left",name:r.value}));const L=e.label!==void 0?[k("div",{class:"ellipsis"},[e.label])]:void 0;return b.push(k("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},vl(t.default,L))),e.iconRight&&b.push(k(pe,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&b.push(k(pe,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:f.value,...m.value.remove,onClick:M,onKeyup:M})),b}return()=>{if(e.modelValue===!1)return;const b={class:c.value,style:o.value};return p.value===!0&&Object.assign(b,m.value.chip,{onClick:C,onKeyup:v}),fl("div",b,D(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[ml,e.ripple]])}}}),Sa=ge({name:"QItem",props:{...Ze,...hl,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:n}){const{proxy:{$q:u}}=qe(),i=et(e,u),{hasLink:o,linkAttrs:d,linkClass:r,linkTag:f,navigateOnClick:p}=gl(),c=q(null),m=q(null),v=y(()=>e.clickable===!0||o.value===!0||e.tag==="label"),C=y(()=>e.disable!==!0&&v.value===!0),M=y(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(i.value===!0?" q-item--dark":"")+(o.value===!0&&e.active===null?r.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(C.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),D=y(()=>{if(e.insetLevel===void 0)return null;const V=u.lang.rtl===!0?"Right":"Left";return{["padding"+V]:16+e.insetLevel*56+"px"}});function b(V){C.value===!0&&(m.value!==null&&V.qAvoidFocus!==!0&&(V.qKeyEvent!==!0&&document.activeElement===c.value?m.value.focus():document.activeElement===m.value&&c.value.focus()),p(V))}function L(V){if(C.value===!0&&vt(V,[13,32])===!0){me(V),V.qKeyEvent=!0;const F=new MouseEvent("click",V);F.qKeyEvent=!0,c.value.dispatchEvent(F)}n("keyup",V)}function K(){const V=yl(t.default,[]);return C.value===!0&&V.unshift(k("div",{class:"q-focus-helper",tabindex:-1,ref:m})),V}return()=>{const V={ref:c,class:M.value,style:D.value,role:"listitem",onClick:b,onKeyup:L};return C.value===!0?(V.tabindex=e.tabindex||"0",Object.assign(V,d.value)):v.value===!0&&(V["aria-disabled"]="true"),k(f.value,V,K())}}}),pa=ge({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const n=y(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>k("div",{class:n.value},tt(t.default))}}),ba=ge({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const n=y(()=>parseInt(e.lines,10)),u=y(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),i=y(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>k("div",{style:i.value,class:u.value},tt(t.default))}}),wa=ge({name:"QMenu",inheritAttrs:!1,props:{...oa,...Sl,...Ze,...pl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:It},self:{type:String,validator:It},offset:{type:Array,validator:ia},scrollTarget:bl,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...wl,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:u}){let i=null,o,d,r;const f=qe(),{proxy:p}=f,{$q:c}=p,m=q(null),v=q(!1),C=y(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),M=et(e,c),{registerTick:D,removeTick:b}=kl(),{registerTimeout:L}=dt(),{transitionProps:K,transitionStyle:V}=_l(e),{localScrollTarget:F,changeScrollEvent:X,unconfigureScrollTarget:O}=ua(e,_),{anchorEl:j,canShow:ee}=ra({showing:v}),{hide:ae}=Cl({showing:v,canShow:ee,handleShow:w,handleHide:a,hideOnRouteChange:C,processOnMount:!0}),{showPortal:J,hidePortal:oe,renderPortal:x}=xl(f,m,H,"menu"),Q={anchorEl:j,innerRef:m,onClickOutside(h){if(e.persistent!==!0&&v.value===!0)return ae(h),(h.type==="touchstart"||h.target.classList.contains("q-dialog__backdrop"))&&me(h),!0}},Y=y(()=>Bt(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),se=y(()=>e.cover===!0?Y.value:Bt(e.self||"top start",c.lang.rtl)),Z=y(()=>(e.square===!0?" q-menu--square":"")+(M.value===!0?" q-menu--dark q-dark":"")),be=y(()=>e.autoClose===!0?{onClick:I}:{}),ce=y(()=>v.value===!0&&e.persistent!==!0);he(ce,h=>{h===!0?(Il(E),ca(Q)):(Mt(E),Et(Q))});function ne(){Bl(()=>{let h=m.value;h&&h.contains(document.activeElement)!==!0&&(h=h.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||h.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||h.querySelector("[autofocus], [data-autofocus]")||h,h.focus({preventScroll:!0}))})}function w(h){if(i=e.noRefocus===!1?document.activeElement:null,ql($),J(),_(),o=void 0,h!==void 0&&(e.touchPosition||e.contextMenu)){const W=zl(h);if(W.left!==void 0){const{top:de,left:ze}=j.value.getBoundingClientRect();o={left:W.left-ze,top:W.top-de}}}d===void 0&&(d=he(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,z)),e.noFocus!==!0&&document.activeElement.blur(),D(()=>{z(),e.noFocus!==!0&&ne()}),L(()=>{c.platform.is.ios===!0&&(r=e.autoClose,m.value.click()),z(),J(!0),n("show",h)},e.transitionDuration)}function a(h){b(),oe(),s(!0),i!==null&&(h===void 0||h.qClickOutside!==!0)&&((((h==null?void 0:h.type.indexOf("key"))===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),L(()=>{oe(!0),n("hide",h)},e.transitionDuration)}function s(h){o=void 0,d!==void 0&&(d(),d=void 0),(h===!0||v.value===!0)&&(Ml($),O(),Et(Q),Mt(E)),h!==!0&&(i=null)}function _(){(j.value!==null||e.scrollTarget!==void 0)&&(F.value=Vl(j.value,e.scrollTarget),X(F.value,z))}function I(h){r!==!0?(Al(p,h),n("click",h)):r=!1}function $(h){ce.value===!0&&e.noFocus!==!0&&El(m.value,h.target)!==!0&&ne()}function E(h){e.noEscDismiss!==!0&&(n("escapeKey"),ae(h))}function z(){sa({targetEl:m.value,offset:e.offset,anchorEl:j.value,anchorOrigin:Y.value,selfOrigin:se.value,absoluteOffset:o,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function H(){return k(Qt,K.value,()=>v.value===!0?k("div",{role:"menu",...u,ref:m,tabindex:-1,class:["q-menu q-position-engine scroll"+Z.value,u.class],style:[u.style,V.value],...be.value},tt(t.default)):null)}return lt(s),Object.assign(p,{focus:ne,updatePosition:z}),x}});let Ye=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,Ye=e.scrollLeft>=0,e.remove()}const re=1e3,ka=["start","center","end","start-force","center-force","end-force"],Jt=Array.prototype.filter,_a=window.getComputedStyle(document.body).overflowAnchor===void 0?Pl:function(e,t){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];Jt.call(n,i=>i.dataset&&i.dataset.qVsAnchor!==void 0).forEach(i=>{delete i.dataset.qVsAnchor});const u=n[t];u!=null&&u.dataset&&(u.dataset.qVsAnchor="")}))};function Re(e,t){return e+t}function st(e,t,n,u,i,o,d,r){const f=e===window?document.scrollingElement||document.documentElement:e,p=i===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-d-r,scrollMaxSize:0,offsetStart:-d,offsetEnd:-r};if(i===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=f.scrollLeft,c.scrollViewSize+=f.clientWidth),c.scrollMaxSize=f.scrollWidth,o===!0&&(c.scrollStart=(Ye===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=f.scrollTop,c.scrollViewSize+=f.clientHeight),c.scrollMaxSize=f.scrollHeight),n!==null)for(let m=n.previousElementSibling;m!==null;m=m.previousElementSibling)m.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=m[p]);if(u!==null)for(let m=u.nextElementSibling;m!==null;m=m.nextElementSibling)m.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=m[p]);if(t!==e){const m=f.getBoundingClientRect(),v=t.getBoundingClientRect();i===!0?(c.offsetStart+=v.left-m.left,c.offsetEnd-=v.width):(c.offsetStart+=v.top-m.top,c.offsetEnd-=v.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function Pt(e,t,n,u){t==="end"&&(t=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(u===!0&&(t=(Ye===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):n===!0?(u===!0&&(t=(Ye===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function Ue(e,t,n,u){if(n>=u)return 0;const i=t.length,o=Math.floor(n/re),d=Math.floor((u-1)/re)+1;let r=e.slice(o,d).reduce(Re,0);return n%re!==0&&(r-=t.slice(o*re,n).reduce(Re,0)),u%re!==0&&u!==i&&(r-=t.slice(u,d*re).reduce(Re,0)),r}const Ca={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Ft={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Ca};function xa({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:n,virtualScrollItemSizeComputed:u}){const i=qe(),{props:o,emit:d,proxy:r}=i,{$q:f}=r;let p,c,m,v=[],C;const M=q(0),D=q(0),b=q({}),L=q(null),K=q(null),V=q(null),F=q({from:0,to:0}),X=y(()=>o.tableColspan!==void 0?o.tableColspan:100);u===void 0&&(u=y(()=>o.virtualScrollItemSize));const O=y(()=>u.value+";"+o.virtualScrollHorizontal),j=y(()=>O.value+";"+o.virtualScrollSliceRatioBefore+";"+o.virtualScrollSliceRatioAfter);he(j,()=>{Z()}),he(O,ee);function ee(){se(c,!0)}function ae(a){se(a===void 0?c:a)}function J(a,s){const _=t();if(_==null||_.nodeType===8)return;const I=st(_,n(),L.value,K.value,o.virtualScrollHorizontal,f.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd);m!==I.scrollViewSize&&Z(I.scrollViewSize),x(_,I,Math.min(e.value-1,Math.max(0,parseInt(a,10)||0)),0,ka.indexOf(s)!==-1?s:c!==-1&&a>c?"end":"start")}function oe(){const a=t();if(a==null||a.nodeType===8)return;const s=st(a,n(),L.value,K.value,o.virtualScrollHorizontal,f.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd),_=e.value-1,I=s.scrollMaxSize-s.offsetStart-s.offsetEnd-D.value;if(p===s.scrollStart)return;if(s.scrollMaxSize<=0){x(a,s,0,0);return}m!==s.scrollViewSize&&Z(s.scrollViewSize),Q(F.value.from);const $=Math.floor(s.scrollMaxSize-Math.max(s.scrollViewSize,s.offsetEnd)-Math.min(C[_],s.scrollViewSize/2));if($>0&&Math.ceil(s.scrollStart)>=$){x(a,s,_,s.scrollMaxSize-s.offsetEnd-v.reduce(Re,0));return}let E=0,z=s.scrollStart-s.offsetStart,H=z;if(z<=I&&z+s.scrollViewSize>=M.value)z-=M.value,E=F.value.from,H=z;else for(let h=0;z>=v[h]&&E<_;h++)z-=v[h],E+=re;for(;z>0&&E<_;)z-=C[E],z>-s.scrollViewSize?(E++,H=z):H=C[E]+z;x(a,s,E,H)}function x(a,s,_,I,$){const E=typeof $=="string"&&$.indexOf("-force")!==-1,z=E===!0?$.replace("-force",""):$,H=z!==void 0?z:"start";let h=Math.max(0,_-b.value[H]),W=h+b.value.total;W>e.value&&(W=e.value,h=Math.max(0,W-b.value.total)),p=s.scrollStart;const de=h!==F.value.from||W!==F.value.to;if(de===!1&&z===void 0){ce(_);return}const{activeElement:ze}=document,ie=V.value;de===!0&&ie!==null&&ie!==ze&&ie.contains(ze)===!0&&(ie.addEventListener("focusout",Y),setTimeout(()=>{ie==null||ie.removeEventListener("focusout",Y)})),_a(ie,_-h);const Qe=z!==void 0?C.slice(h,_).reduce(Re,0):0;if(de===!0){const we=W>=F.value.from&&h<=F.value.to?F.value.to:W;F.value={from:h,to:we},M.value=Ue(v,C,0,h),D.value=Ue(v,C,W,e.value),requestAnimationFrame(()=>{F.value.to!==W&&p===s.scrollStart&&(F.value={from:F.value.from,to:W},D.value=Ue(v,C,W,e.value))})}requestAnimationFrame(()=>{if(p!==s.scrollStart)return;de===!0&&Q(h);const we=C.slice(h,_).reduce(Re,0),ke=we+s.offsetStart+M.value,je=ke+C[_];let Le=ke+I;if(z!==void 0){const at=we-Qe,Oe=s.scrollStart+at;Le=E!==!0&&Oe<ke&&je<Oe+s.scrollViewSize?Oe:z==="end"?je-s.scrollViewSize:ke-(z==="start"?0:Math.round((s.scrollViewSize-C[_])/2))}p=Le,Pt(a,Le,o.virtualScrollHorizontal,f.lang.rtl),ce(_)})}function Q(a){const s=V.value;if(s){const _=Jt.call(s.children,h=>h.classList&&h.classList.contains("q-virtual-scroll--skip")===!1),I=_.length,$=o.virtualScrollHorizontal===!0?h=>h.getBoundingClientRect().width:h=>h.offsetHeight;let E=a,z,H;for(let h=0;h<I;){for(z=$(_[h]),h++;h<I&&_[h].classList.contains("q-virtual-scroll--with-prev")===!0;)z+=$(_[h]),h++;H=z-C[E],H!==0&&(C[E]+=H,v[Math.floor(E/re)]+=H),E++}}}function Y(){var a;(a=V.value)==null||a.focus()}function se(a,s){const _=1*u.value;(s===!0||Array.isArray(C)===!1)&&(C=[]);const I=C.length;C.length=e.value;for(let E=e.value-1;E>=I;E--)C[E]=_;const $=Math.floor((e.value-1)/re);v=[];for(let E=0;E<=$;E++){let z=0;const H=Math.min((E+1)*re,e.value);for(let h=E*re;h<H;h++)z+=C[h];v.push(z)}c=-1,p=void 0,M.value=Ue(v,C,0,F.value.from),D.value=Ue(v,C,F.value.to,e.value),a>=0?(Q(F.value.from),Se(()=>{J(a)})):ne()}function Z(a){if(a===void 0&&typeof window<"u"){const z=t();z!=null&&z.nodeType!==8&&(a=st(z,n(),L.value,K.value,o.virtualScrollHorizontal,f.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd).scrollViewSize)}m=a;const s=parseFloat(o.virtualScrollSliceRatioBefore)||0,_=parseFloat(o.virtualScrollSliceRatioAfter)||0,I=1+s+_,$=a===void 0||a<=0?1:Math.ceil(a/u.value),E=Math.max(1,$,Math.ceil((o.virtualScrollSliceSize>0?o.virtualScrollSliceSize:10)/I));b.value={total:Math.ceil(E*I),start:Math.ceil(E*s),center:Math.ceil(E*(.5+s)),end:Math.ceil(E*(1+s)),view:$}}function be(a,s){const _=o.virtualScrollHorizontal===!0?"width":"height",I={["--q-virtual-scroll-item-"+_]:u.value+"px"};return[a==="tbody"?k(a,{class:"q-virtual-scroll__padding",key:"before",ref:L},[k("tr",[k("td",{style:{[_]:`${M.value}px`,...I},colspan:X.value})])]):k(a,{class:"q-virtual-scroll__padding",key:"before",ref:L,style:{[_]:`${M.value}px`,...I}}),k(a,{class:"q-virtual-scroll__content",key:"content",ref:V,tabindex:-1},s.flat()),a==="tbody"?k(a,{class:"q-virtual-scroll__padding",key:"after",ref:K},[k("tr",[k("td",{style:{[_]:`${D.value}px`,...I},colspan:X.value})])]):k(a,{class:"q-virtual-scroll__padding",key:"after",ref:K,style:{[_]:`${D.value}px`,...I}})]}function ce(a){c!==a&&(o.onVirtualScroll!==void 0&&d("virtualScroll",{index:a,from:F.value.from,to:F.value.to-1,direction:a<c?"decrease":"increase",ref:r}),c=a)}Z();const ne=Fl(oe,f.platform.is.ios===!0?120:35);Dl(()=>{Z()});let w=!1;return Tl(()=>{w=!0}),Rl(()=>{if(w!==!0)return;const a=t();p!==void 0&&a!==void 0&&a!==null&&a.nodeType!==8?Pt(a,p,o.virtualScrollHorizontal,f.lang.rtl):J(c)}),lt(()=>{ne.cancel()}),Object.assign(r,{scrollTo:J,reset:ee,refresh:ae}),{virtualScrollSliceRange:F,virtualScrollSliceSizeComputed:b,setVirtualScrollSize:Z,onVirtualScrollEvt:ne,localResetVirtualScroll:se,padVirtualScroll:be,scrollTo:J,reset:ee,refresh:ae}}function Dt(e,t,n){if(n<=t)return t;const u=n-t+1;let i=t+(e-t)%u;return i<t&&(i=u+i),i===0?0:i}const Tt=e=>["add","add-unique","toggle"].includes(e),qa=".*+?^${}()|[]\\",za=Object.keys(ft);function ct(e,t){if(typeof e=="function")return e;const n=e!==void 0?e:t;return u=>u!==null&&typeof u=="object"&&n in u?u[n]:u}var Ma=ge({name:"QSelect",inheritAttrs:!1,props:{...Ft,...Ll,...ft,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Tt},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:Ft.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Ot,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:t,emit:n}){const{proxy:u}=qe(),{$q:i}=u,o=q(!1),d=q(!1),r=q(-1),f=q(""),p=q(!1),c=q(!1);let m=null,v=null,C,M,D,b=null,L,K,V,F;const X=q(null),O=q(null),j=q(null),ee=q(null),ae=q(null),J=Ol(e),oe=Ul(_t),x=y(()=>Array.isArray(e.options)?e.options.length:0),Q=y(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Y,virtualScrollSliceSizeComputed:se,localResetVirtualScroll:Z,padVirtualScroll:be,onVirtualScrollEvt:ce,scrollTo:ne,setVirtualScrollSize:w}=xa({virtualScrollLength:x,getVirtualScrollTarget:Zt,getVirtualScrollEl:wt,virtualScrollItemSizeComputed:Q}),a=Ht(),s=y(()=>{const l=e.mapOptions===!0&&e.multiple!==!0,g=e.modelValue!==void 0&&(e.modelValue!==null||l===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const S=e.mapOptions===!0&&C!==void 0?C:[],B=g.map(T=>Yt(T,S));return e.modelValue===null&&l===!0?B.filter(T=>T!==null):B}return g}),_=y(()=>{const l={};return za.forEach(g=>{const S=e[g];S!==void 0&&(l[g]=S)}),l}),I=y(()=>e.optionsDark===null?a.isDark.value:e.optionsDark),$=y(()=>Vt(s.value)),E=y(()=>{let l="q-field__input q-placeholder col";return e.hideSelected===!0||s.value.length===0?[l,e.inputClass]:(l+=" q-field__input--padding",e.inputClass===void 0?l:[l,e.inputClass])}),z=y(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),H=y(()=>x.value===0),h=y(()=>s.value.map(l=>te.value(l)).join(", ")),W=y(()=>e.displayValue!==void 0?e.displayValue:h.value),de=y(()=>e.optionsHtml===!0?()=>!0:l=>(l==null?void 0:l.html)===!0),ze=y(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||s.value.some(de.value))),ie=y(()=>a.focused.value===!0?e.tabindex:-1),Qe=y(()=>{const l={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":o.value===!0?"true":"false","aria-controls":`${a.targetUid.value}_lb`};return r.value>=0&&(l["aria-activedescendant"]=`${a.targetUid.value}_${r.value}`),l}),we=y(()=>({id:`${a.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ke=y(()=>s.value.map((l,g)=>({index:g,opt:l,html:de.value(l),selected:!0,removeAtIndex:Xt,toggleOption:_e,tabindex:ie.value}))),je=y(()=>{if(x.value===0)return[];const{from:l,to:g}=Y.value;return e.options.slice(l,g).map((S,B)=>{const T=Me.value(S)===!0,U=ot(S)===!0,R=l+B,N={clickable:!0,active:U,activeClass:Oe.value,manualFocus:!0,focused:!1,disable:T,tabindex:-1,dense:e.optionsDense,dark:I.value,role:"option","aria-selected":U===!0?"true":"false",id:`${a.targetUid.value}_${R}`,onClick:()=>{_e(S)}};return T!==!0&&(r.value===R&&(N.focused=!0),i.platform.is.desktop===!0&&(N.onMousemove=()=>{o.value===!0&&Ve(R)})),{index:R,opt:S,html:de.value(S),label:te.value(S),selected:N.active,focused:N.focused,toggleOption:_e,setOptionIndex:Ve,itemProps:N}})}),Le=y(()=>e.dropdownIcon!==void 0?e.dropdownIcon:i.iconSet.arrow.dropdown),at=y(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Oe=y(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),fe=y(()=>ct(e.optionValue,"value")),te=y(()=>ct(e.optionLabel,"label")),Me=y(()=>ct(e.optionDisable,"disable")),We=y(()=>s.value.map(fe.value)),Gt=y(()=>{const l={onInput:_t,onChange:oe,onKeydown:bt,onKeyup:St,onKeypress:pt,onFocus:gt,onClick(g){M===!0&&Fe(g)}};return l.onCompositionstart=l.onCompositionupdate=l.onCompositionend=oe,l});he(s,l=>{C=l,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&a.innerLoading.value!==!0&&(d.value!==!0&&o.value!==!0||$.value!==!0)&&(D!==!0&&Ee(),(d.value===!0||o.value===!0)&&Ae(""))},{immediate:!0}),he(()=>e.fillInput,Ee),he(o,it),he(x,dl);function mt(l){return e.emitValue===!0?fe.value(l):l}function nt(l){if(l!==-1&&l<s.value.length)if(e.multiple===!0){const g=e.modelValue.slice();n("remove",{index:l,value:g.splice(l,1)[0]}),n("update:modelValue",g)}else n("update:modelValue",null)}function Xt(l){nt(l),a.focus()}function ht(l,g){const S=mt(l);if(e.multiple!==!0){e.fillInput===!0&&$e(te.value(l),!0,!0),n("update:modelValue",S);return}if(s.value.length===0){n("add",{index:0,value:S}),n("update:modelValue",e.multiple===!0?[S]:S);return}if(g===!0&&ot(l)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const B=e.modelValue.slice();n("add",{index:B.length,value:S}),B.push(S),n("update:modelValue",B)}function _e(l,g){var U;if(a.editable.value!==!0||l===void 0||Me.value(l)===!0)return;const S=fe.value(l);if(e.multiple!==!0){g!==!0&&($e(e.fillInput===!0?te.value(l):"",!0,!0),Ce()),(U=O.value)==null||U.focus(),(s.value.length===0||He(fe.value(s.value[0]),S)!==!0)&&n("update:modelValue",e.emitValue===!0?S:l);return}if((M!==!0||p.value===!0)&&a.focus(),gt(),s.value.length===0){const R=e.emitValue===!0?S:l;n("add",{index:0,value:R}),n("update:modelValue",e.multiple===!0?[R]:R);return}const B=e.modelValue.slice(),T=We.value.findIndex(R=>He(R,S));if(T!==-1)n("remove",{index:T,value:B.splice(T,1)[0]});else{if(e.maxValues!==void 0&&B.length>=e.maxValues)return;const R=e.emitValue===!0?S:l;n("add",{index:B.length,value:R}),B.push(R)}n("update:modelValue",B)}function Ve(l){if(i.platform.is.desktop!==!0)return;const g=l!==-1&&l<x.value?l:-1;r.value!==g&&(r.value=g)}function Ke(l=1,g){if(o.value===!0){let S=r.value;do S=Dt(S+l,-1,x.value-1);while(S!==-1&&S!==r.value&&Me.value(e.options[S])===!0);r.value!==S&&(Ve(S),ne(S),g!==!0&&e.useInput===!0&&e.fillInput===!0&&Je(S>=0?te.value(e.options[S]):L,!0))}}function Yt(l,g){const S=B=>He(fe.value(B),l);return e.options.find(S)||g.find(S)||l}function ot(l){const g=fe.value(l);return We.value.find(S=>He(S,g))!==void 0}function gt(l){e.useInput===!0&&O.value!==null&&(l===void 0||O.value===l.target&&l.target.value===h.value)&&O.value.select()}function yt(l){vt(l,27)===!0&&o.value===!0&&(Fe(l),Ce(),Ee()),n("keyup",l)}function St(l){const{value:g}=l.target;if(l.keyCode!==void 0){yt(l);return}if(l.target.value="",m!==null&&(clearTimeout(m),m=null),v!==null&&(clearTimeout(v),v=null),Ee(),typeof g=="string"&&g.length!==0){const S=g.toLocaleLowerCase(),B=U=>{const R=e.options.find(N=>String(U.value(N)).toLocaleLowerCase()===S);return R===void 0?!1:(s.value.indexOf(R)===-1?_e(R):Ce(),!0)},T=U=>{B(fe)!==!0&&U!==!0&&B(te)!==!0&&Ae(g,!0,()=>T(!0))};T()}else a.clearValue(l)}function pt(l){n("keypress",l)}function bt(l){if(n("keydown",l),Nl(l)===!0)return;const g=f.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),S=l.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(r.value!==-1||g===!0);if(l.keyCode===27){ut(l);return}if(l.keyCode===9&&S===!1){Ie();return}if(l.target===void 0||l.target.id!==a.targetUid.value||a.editable.value!==!0)return;if(l.keyCode===40&&a.innerLoading.value!==!0&&o.value===!1){me(l),Be();return}if(l.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&f.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?nt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(l.keyCode===35||l.keyCode===36)&&(typeof f.value!="string"||f.value.length===0)&&(me(l),r.value=-1,Ke(l.keyCode===36?1:-1,e.multiple)),(l.keyCode===33||l.keyCode===34)&&se.value!==void 0&&(me(l),r.value=Math.max(-1,Math.min(x.value,r.value+(l.keyCode===33?-1:1)*se.value.view)),Ke(l.keyCode===33?1:-1,e.multiple)),(l.keyCode===38||l.keyCode===40)&&(me(l),Ke(l.keyCode===38?-1:1,e.multiple));const B=x.value;if((V===void 0||F<Date.now())&&(V=""),B>0&&e.useInput!==!0&&l.key!==void 0&&l.key.length===1&&l.altKey===!1&&l.ctrlKey===!1&&l.metaKey===!1&&(l.keyCode!==32||V.length!==0)){o.value!==!0&&Be(l);const T=l.key.toLocaleLowerCase(),U=V.length===1&&V[0]===T;F=Date.now()+1500,U===!1&&(me(l),V+=T);const R=new RegExp("^"+V.split("").map(Pe=>qa.indexOf(Pe)!==-1?"\\"+Pe:Pe).join(".*"),"i");let N=r.value;if(U===!0||N<0||R.test(te.value(e.options[N]))!==!0)do N=Dt(N+1,-1,B-1);while(N!==r.value&&(Me.value(e.options[N])===!0||R.test(te.value(e.options[N]))!==!0));r.value!==N&&Se(()=>{Ve(N),ne(N),N>=0&&e.useInput===!0&&e.fillInput===!0&&Je(te.value(e.options[N]),!0)});return}if(!(l.keyCode!==13&&(l.keyCode!==32||e.useInput===!0||V!=="")&&(l.keyCode!==9||S===!1))){if(l.keyCode!==9&&me(l),r.value!==-1&&r.value<B){_e(e.options[r.value]);return}if(g===!0){const T=(U,R)=>{var Pe;if(R){if(Tt(R)!==!0)return}else R=e.newValueMode;if($e("",e.multiple!==!0,!0),U==null)return;(R==="toggle"?_e:ht)(U,R==="add-unique"),e.multiple!==!0&&((Pe=O.value)==null||Pe.focus(),Ce())};if(e.onNewValue!==void 0?n("newValue",f.value,T):T(f.value),e.multiple!==!0)return}o.value===!0?Ie():a.innerLoading.value!==!0&&Be()}}function wt(){return M===!0?ae.value:j.value!==null&&j.value.contentEl!==null?j.value.contentEl:void 0}function Zt(){return wt()}function el(){return e.hideSelected===!0?[]:t["selected-item"]!==void 0?ke.value.map(l=>t["selected-item"](l)).slice():t.selected!==void 0?[].concat(t.selected()):e.useChips===!0?ke.value.map((l,g)=>k(ya,{key:"option-"+g,removable:a.editable.value===!0&&Me.value(l.opt)!==!0,dense:!0,textColor:e.color,tabindex:ie.value,onRemove(){l.removeAtIndex(g)}},()=>k("span",{class:"ellipsis",[l.html===!0?"innerHTML":"textContent"]:te.value(l.opt)}))):[k("span",{class:"ellipsis",[ze.value===!0?"innerHTML":"textContent"]:W.value})]}function kt(){if(H.value===!0)return t["no-option"]!==void 0?t["no-option"]({inputValue:f.value}):void 0;const l=t.option!==void 0?t.option:S=>k(Sa,{key:S.index,...S.itemProps},()=>k(pa,()=>k(ba,()=>k("span",{[S.html===!0?"innerHTML":"textContent"]:S.label}))));let g=be("div",je.value.map(l));return t["before-options"]!==void 0&&(g=t["before-options"]().concat(g)),Wt(t["after-options"],g)}function tl(l,g){const S=g===!0?{...Qe.value,...a.splitAttrs.attributes.value}:void 0,B={ref:g===!0?O:void 0,key:"i_t",class:E.value,style:e.inputStyle,value:f.value!==void 0?f.value:"",type:"search",...S,id:g===!0?a.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":l===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Gt.value};return l!==!0&&M===!0&&(Array.isArray(B.class)===!0?B.class=[...B.class,"no-pointer-events"]:B.class+=" no-pointer-events"),k("input",B)}function _t(l){m!==null&&(clearTimeout(m),m=null),v!==null&&(clearTimeout(v),v=null),!(l&&l.target&&l.target.qComposing===!0)&&(Je(l.target.value||""),D=!0,L=f.value,a.focused.value!==!0&&(M!==!0||p.value===!0)&&a.focus(),e.onFilter!==void 0&&(m=setTimeout(()=>{m=null,Ae(f.value)},e.inputDebounce)))}function Je(l,g){f.value!==l&&(f.value=l,g===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",l):v=setTimeout(()=>{v=null,n("inputValue",l)},e.inputDebounce))}function $e(l,g,S){D=S!==!0,e.useInput===!0&&(Je(l,!0),(g===!0||S!==!0)&&(L=l),g!==!0&&Ae(l))}function Ae(l,g,S){if(e.onFilter===void 0||g!==!0&&a.focused.value!==!0)return;a.innerLoading.value===!0?n("filterAbort"):(a.innerLoading.value=!0,c.value=!0),l!==""&&e.multiple!==!0&&s.value.length!==0&&D!==!0&&l===te.value(s.value[0])&&(l="");const B=setTimeout(()=>{o.value===!0&&(o.value=!1)},10);b!==null&&clearTimeout(b),b=B,n("filter",l,(T,U)=>{(g===!0||a.focused.value===!0)&&b===B&&(clearTimeout(b),typeof T=="function"&&T(),c.value=!1,Se(()=>{a.innerLoading.value=!1,a.editable.value===!0&&(g===!0?o.value===!0&&Ce():o.value===!0?it(!0):o.value=!0),typeof U=="function"&&Se(()=>{U(u)}),typeof S=="function"&&Se(()=>{S(u)})}))},()=>{a.focused.value===!0&&b===B&&(clearTimeout(b),a.innerLoading.value=!1,c.value=!1),o.value===!0&&(o.value=!1)})}function ll(){return k(wa,{ref:j,class:z.value,style:e.popupContentStyle,modelValue:o.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&H.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:I.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:at.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...we.value,onScrollPassive:ce,onBeforeShow:xt,onBeforeHide:al,onShow:nl},kt)}function al(l){qt(l),Ie()}function nl(){w()}function ol(l){var g;Fe(l),(g=O.value)==null||g.focus(),p.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function il(l){Fe(l),Se(()=>{p.value=!1})}function ul(){const l=[k(ha,{class:`col-auto ${a.fieldClass.value}`,..._.value,for:a.targetUid.value,dark:I.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:f.value.length!==0,...a.splitAttrs.listeners.value,onFocus:ol,onBlur:il},{...t,rawControl:()=>a.getControl(!0),before:void 0,after:void 0})];return o.value===!0&&l.push(k("div",{ref:ae,class:z.value+" scroll",style:e.popupContentStyle,...we.value,onClick:ut,onScrollPassive:ce},kt())),k(jt,{ref:ee,modelValue:d.value,position:e.useInput===!0?"top":void 0,transitionShow:K,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:xt,onBeforeHide:rl,onHide:sl,onShow:cl},()=>k("div",{class:"q-select__dialog"+(I.value===!0?" q-select__dialog--dark q-dark":"")+(p.value===!0?" q-select__dialog--focused":"")},l))}function rl(l){qt(l),ee.value!==null&&ee.value.__updateRefocusTarget(a.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),a.focused.value=!1}function sl(l){Ce(),a.focused.value===!1&&n("blur",l),Ee()}function cl(){const l=document.activeElement;(l===null||l.id!==a.targetUid.value)&&O.value!==null&&O.value!==l&&O.value.focus(),w()}function Ie(){d.value!==!0&&(r.value=-1,o.value===!0&&(o.value=!1),a.focused.value===!1&&(b!==null&&(clearTimeout(b),b=null),a.innerLoading.value===!0&&(n("filterAbort"),a.innerLoading.value=!1,c.value=!1)))}function Be(l){a.editable.value===!0&&(M===!0?(a.onControlFocusin(l),d.value=!0,Se(()=>{a.focus()})):a.focus(),e.onFilter!==void 0?Ae(f.value):(H.value!==!0||t["no-option"]!==void 0)&&(o.value=!0))}function Ce(){d.value=!1,Ie()}function Ee(){e.useInput===!0&&$e(e.multiple!==!0&&e.fillInput===!0&&s.value.length!==0&&te.value(s.value[0])||"",!0,!0)}function it(l){let g=-1;if(l===!0){if(s.value.length!==0){const S=fe.value(s.value[0]);g=e.options.findIndex(B=>He(fe.value(B),S))}Z(g)}Ve(g)}function dl(l,g){o.value===!0&&a.innerLoading.value===!1&&(Z(-1,!0),Se(()=>{o.value===!0&&a.innerLoading.value===!1&&(l>g?Z():it(!0))}))}function Ct(){d.value===!1&&j.value!==null&&j.value.updatePosition()}function xt(l){l!==void 0&&Fe(l),n("popupShow",l),a.hasPopupOpen=!0,a.onControlFocusin(l)}function qt(l){l!==void 0&&Fe(l),n("popupHide",l),a.hasPopupOpen=!1,a.onControlFocusout(l)}function zt(){M=i.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?t["no-option"]!==void 0||e.onFilter!==void 0||H.value===!1:!0),K=i.platform.is.ios===!0&&M===!0&&e.useInput===!0?"fade":e.transitionShow}return $l(zt),Hl(Ct),zt(),lt(()=>{m!==null&&clearTimeout(m),v!==null&&clearTimeout(v)}),Object.assign(u,{showPopup:Be,hidePopup:Ce,removeAtIndex:nt,add:ht,toggleOption:_e,getOptionIndex:()=>r.value,setOptionIndex:Ve,moveOptionSelection:Ke,filter:Ae,updateMenuPosition:Ct,updateInputValue:$e,isOptionSelected:ot,getEmittingOptionValue:mt,isOptionDisabled:(...l)=>Me.value.apply(null,l)===!0,getOptionValue:(...l)=>fe.value.apply(null,l),getOptionLabel:(...l)=>te.value.apply(null,l)}),Object.assign(a,{innerValue:s,fieldClass:y(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:X,targetRef:O,hasValue:$,showPopup:Be,floatingLabel:y(()=>e.hideSelected!==!0&&$.value===!0||typeof f.value=="number"||f.value.length!==0||Vt(e.displayValue)),getControlChild:()=>{if(a.editable.value!==!1&&(d.value===!0||H.value!==!0||t["no-option"]!==void 0))return M===!0?ul():ll();a.hasPopupOpen===!0&&(a.hasPopupOpen=!1)},controlEvents:{onFocusin(l){a.onControlFocusin(l)},onFocusout(l){a.onControlFocusout(l,()=>{Ee(),Ie()})},onClick(l){var g;if(ut(l),M!==!0&&o.value===!0){Ie(),(g=O.value)==null||g.focus();return}Be(l)}},getControl:l=>{const g=el(),S=l===!0||d.value!==!0||M!==!0;if(e.useInput===!0)g.push(tl(l,S));else if(a.editable.value===!0){const T=S===!0?Qe.value:void 0;g.push(k("input",{ref:S===!0?O:void 0,key:"d_t",class:"q-select__focus-target",id:S===!0?a.targetUid.value:void 0,value:W.value,readonly:!0,"data-autofocus":l===!0||e.autofocus===!0||void 0,...T,onKeydown:bt,onKeyup:yt,onKeypress:pt})),S===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&g.push(k("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:St}))}if(J.value!==void 0&&e.disable!==!0&&We.value.length!==0){const T=We.value.map(U=>k("option",{value:U,selected:!0}));g.push(k("select",{class:"hidden",name:J.value,multiple:e.multiple},T))}const B=e.useInput===!0||S!==!0?void 0:a.splitAttrs.attributes.value;return k("div",{class:"q-field__native row items-center",...B,...a.splitAttrs.listeners.value},g)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[k(pe,{class:"q-select__dropdown-icon"+(o.value===!0?" rotate-180":""),name:Le.value})]:null}),$t(a)}});const Va={xs:2,sm:4,md:6,lg:10,xl:14};function Rt(e,t,n){return{transform:t===!0?`translateX(${n.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var Aa=ge({name:"QLinearProgress",props:{...Ze,...Ut,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:n}=qe(),u=et(e,n.$q),i=Nt(e,Va),o=y(()=>e.indeterminate===!0||e.query===!0),d=y(()=>e.reverse!==e.query),r=y(()=>({...i.value!==null?i.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),f=y(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),p=y(()=>Rt(e.buffer!==void 0?e.buffer:1,d.value,n.$q)),c=y(()=>`with${e.instantFeedback===!0?"out":""}-transition`),m=y(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${c.value} q-linear-progress__track--${u.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),v=y(()=>Rt(o.value===!0?1:e.value,d.value,n.$q)),C=y(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${c.value} q-linear-progress__model--${o.value===!0?"in":""}determinate`),M=y(()=>({width:`${e.value*100}%`})),D=y(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${c.value}`);return()=>{const b=[k("div",{class:m.value,style:p.value}),k("div",{class:C.value,style:v.value})];return e.stripe===!0&&o.value===!1&&b.push(k("div",{class:D.value,style:M.value})),k("div",{class:f.value,style:r.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Wt(t.default,b))}}});const Ia={ratio:[String,Number]};function Ba(e,t){return y(()=>{const n=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(n)!==!0&&n>0?{paddingBottom:`${100/n}%`}:null})}const Ea=1.7778;var Pa=ge({name:"QImg",props:{...Ia,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Ea},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:n}){const u=q(e.initialRatio),i=Ba(e,u),o=qe(),{registerTimeout:d,removeTimeout:r}=dt(),{registerTimeout:f,removeTimeout:p}=dt(),c=y(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),m=y(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),v=[q(null),q(c.value)],C=q(0),M=q(!1),D=q(!1),b=y(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),L=y(()=>({width:e.width,height:e.height})),K=y(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),V=y(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function F(){if(p(),e.loadingShowDelay===0){M.value=!0;return}f(()=>{M.value=!0},e.loadingShowDelay)}function X(){p(),M.value=!1}function O({target:x}){rt(o)===!1&&(r(),u.value=x.naturalHeight===0?.5:x.naturalWidth/x.naturalHeight,j(x,1))}function j(x,Q){Q===1e3||rt(o)===!0||(x.complete===!0?ee(x):d(()=>{j(x,Q+1)},50))}function ee(x){rt(o)!==!0&&(C.value=C.value^1,v[C.value].value=null,X(),x.getAttribute("__qerror")!=="true"&&(D.value=!1),n("load",x.currentSrc||x.src))}function ae(x){r(),X(),D.value=!0,v[C.value].value=m.value,v[C.value^1].value=c.value,n("error",x)}function J(x){const Q=v[x].value,Y={key:"img_"+x,class:K.value,style:V.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...Q};return C.value===x?Object.assign(Y,{class:Y.class+"current",onLoad:O,onError:ae}):Y.class+="loaded",k("div",{class:"q-img__container absolute-full",key:"img"+x},k("img",Y))}function oe(){return M.value===!1?k("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},tt(t[D.value===!0?"error":"default"])):k("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[k(jl,{color:e.spinnerColor,size:e.spinnerSize})])}{let x=function(){he(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,Q=>{r(),D.value=!1,Q===null?(X(),v[C.value^1].value=c.value):F(),v[C.value].value=Q},{immediate:!0})};Ql.value===!0?Kt(x):x()}return()=>{const x=[];return i.value!==null&&x.push(k("div",{key:"filler",style:i.value})),v[0].value!==null&&x.push(J(0)),v[1].value!==null&&x.push(J(1)),x.push(k(Qt,{name:"q-transition--fade"},oe)),k("div",{key:"main",class:b.value,style:L.value,role:"img","aria-label":e.alt},x)}}});function Lt(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var Fa=Wl({name:"close-popup",beforeMount(e,{value:t}){const n={depth:Lt(t),handler(u){n.depth!==0&&setTimeout(()=>{const i=Kl(e);i!==void 0&&Jl(i,u,n.depth)})},handlerKey(u){vt(u,13)===!0&&n.handler(u)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=Lt(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});class Da{constructor(){this.modules=new Map,this.loadingPromises=new Map,this.initialized=!1}async initialize(){if(!this.initialized)try{if(!("WebAssembly"in window))throw new Error("\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301WebAssembly");await this.preloadCoreModules(),this.initialized=!0,console.log("WASM\u73AF\u5883\u521D\u59CB\u5316\u5B8C\u6210")}catch(t){throw console.error("WASM\u73AF\u5883\u521D\u59CB\u5316\u5931\u8D25:",t),t}}async preloadCoreModules(){const t=[{name:"imageProcessor",url:"/wasm/image-processor.wasm",priority:"high"},{name:"opencv",url:"/wasm/opencv.wasm",priority:"medium"}],n=t.filter(i=>i.priority==="high");await Promise.all(n.map(i=>this.loadModule(i.name,i.url))),t.filter(i=>i.priority==="medium").forEach(i=>{this.loadModule(i.name,i.url).catch(console.error)})}async loadModule(t,n,u={}){if(this.modules.has(t))return this.modules.get(t);if(this.loadingPromises.has(t))return this.loadingPromises.get(t);const i=this._loadModuleInternal(t,n,u);this.loadingPromises.set(t,i);try{const o=await i;return this.modules.set(t,o),this.loadingPromises.delete(t),o}catch(o){throw this.loadingPromises.delete(t),o}}async _loadModuleInternal(t,n,u){try{console.log(`\u5F00\u59CB\u52A0\u8F7DWASM\u6A21\u5757: ${t}`);const i=performance.now(),o=await fetch(n);if(!o.ok)throw new Error(`\u52A0\u8F7DWASM\u6A21\u5757\u5931\u8D25: ${o.status} ${o.statusText}`);const d=await o.arrayBuffer(),r=await WebAssembly.compile(d),f=await WebAssembly.instantiate(r,u),p=performance.now()-i;return console.log(`WASM\u6A21\u5757 ${t} \u52A0\u8F7D\u5B8C\u6210\uFF0C\u8017\u65F6: ${p.toFixed(2)}ms`),{module:r,instance:f,exports:f.exports,memory:f.exports.memory,loadTime:p}}catch(i){throw console.error(`WASM\u6A21\u5757 ${t} \u52A0\u8F7D\u5931\u8D25:`,i),i}}getModule(t){return this.modules.get(t)||null}hasModule(t){return this.modules.has(t)}unloadModule(t){this.modules.has(t)&&(this.modules.get(t).memory,this.modules.delete(t),console.log(`WASM\u6A21\u5757 ${t} \u5DF2\u5378\u8F7D`))}getMemoryUsage(t){const n=this.getModule(t);if(!n||!n.memory)return null;const u=n.memory;return{pages:u.buffer.byteLength/65536,bytes:u.buffer.byteLength,maxPages:u.maximum||"unlimited"}}createSharedBuffer(t){try{if(typeof SharedArrayBuffer<"u")return new SharedArrayBuffer(t)}catch{console.warn("SharedArrayBuffer\u4E0D\u53EF\u7528\uFF0C\u4F7F\u7528ArrayBuffer\u66FF\u4EE3")}return new ArrayBuffer(t)}getLoadedModules(){return Array.from(this.modules.entries()).map(([t,n])=>({name:t,loadTime:n.loadTime,memoryUsage:this.getMemoryUsage(t)}))}async cleanup(){console.log("\u6E05\u7406WASM\u7BA1\u7406\u5668...");for(const t of this.modules.keys())this.unloadModule(t);this.loadingPromises.clear(),this.initialized=!1}dispose(){console.log("\u6E05\u7406WASM\u7BA1\u7406\u5668...");for(const t of this.modules.keys())this.unloadModule(t);this.loadingPromises.clear(),this.initialized=!1}}const Xe=new Da;class Ta{constructor(){this.canvas=null,this.ctx=null,this.worker=null,this.wasmEnabled=!1,this.initCanvas(),this.initializeEngines()}initCanvas(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high"}async initializeEngines(){try{await Xe.initialize(),this.wasmEnabled=!0,console.log("WebAssembly\u5F15\u64CE\u5DF2\u542F\u7528")}catch(t){console.warn("WebAssembly\u5F15\u64CE\u521D\u59CB\u5316\u5931\u8D25:",t),this.wasmEnabled=!1}}async processImage(t,n){return new Promise((u,i)=>{const o=new FileReader;o.onload=async d=>{try{const r=new Image;r.onload=async()=>{try{let f;n.useWasm&&this.wasmEnabled?f=await this.processImageWithWasm(r,n,t.name):f=await this.processImageData(r,n,t.name),u(f)}catch(f){i(f)}},r.onerror=()=>{i(new Error(`\u65E0\u6CD5\u52A0\u8F7D\u56FE\u7247: ${t.name}`))},r.src=d.target.result}catch(r){i(r)}},o.onerror=()=>{i(new Error(`\u65E0\u6CD5\u8BFB\u53D6\u6587\u4EF6: ${t.name}`))},o.readAsDataURL(t)})}async processImageWithWasm(t,n,u){try{const i=await Xe.getModule("imageProcessor");if(!i)throw new Error("WASM\u56FE\u50CF\u5904\u7406\u6A21\u5757\u672A\u52A0\u8F7D");this.canvas.width=t.width,this.canvas.height=t.height,this.ctx.drawImage(t,0,0);const o=this.ctx.getImageData(0,0,t.width,t.height),d=await i.processImage(o,n);return this.ctx.putImageData(d,0,0),this.canvasToResult(this.canvas,u,n)}catch(i){return console.error("WASM\u56FE\u50CF\u5904\u7406\u5931\u8D25:",i),this.processImageData(t,n,u)}}async applyBasicProcessing(t,n){const u=document.createElement("canvas"),i=u.getContext("2d");let{width:o,height:d}=this.calculateDimensions(t.width,t.height,n);return u.width=o,u.height=d,i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",n.backgroundColor&&(i.fillStyle=n.backgroundColor,i.fillRect(0,0,o,d)),i.drawImage(t,0,0,o,d),u}calculateDimensions(t,n,u){let{width:i,height:o,maxWidth:d,maxHeight:r,maintainAspectRatio:f=!0,scale:p}=u;if(p&&p!==1)return{width:Math.round(t*p),height:Math.round(n*p)};if(!i&&!o&&!d&&!r)return{width:t,height:n};const c=t/n;if(d||r){let m=t,v=n;d&&t>d&&(m=d,v=f?m/c:n),r&&v>r&&(v=r,m=f?v*c:t),i=m,o=v}return i&&!o&&f?o=i/c:o&&!i&&f?i=o*c:!i&&!o&&(i=t,o=n),{width:Math.round(i||t),height:Math.round(o||n)}}canvasToResult(t,n,u){const i=u.format||"image/jpeg",o=u.quality||.9;return{canvas:t,dataUrl:t.toDataURL(i,o),blob:new Promise(d=>t.toBlob(d,i,o)),fileName:this.generateFileName(n,u),width:t.width,height:t.height,format:i,quality:o}}async processImageData(t,n,u){const i=t.width,o=t.height;let d,r;switch(n.resizeOption){case"original":d=i,r=o;break;case"percentage":d=Math.round(i*n.resizePercentage/100),r=Math.round(o*n.resizePercentage/100);break;case"custom":default:{const c=this.calculateTargetDimensions(i,o,n.targetWidth,n.targetHeight,n.resizeMode);d=c.width,r=c.height;break}}this.canvas.width=d,this.canvas.height=r,this.ctx.clearRect(0,0,d,r),n.resizeMode==="keep_ratio_pad"&&(this.ctx.fillStyle="#FFFFFF",this.ctx.fillRect(0,0,d,r)),this.drawImageWithMode(t,n.resizeMode,d,r);const f=await this.optimizeImageQuality(n.maxFileSize),p=this.getDataUrlSize(f);return{name:this.generateFileName(u),dataUrl:f,originalSize:{width:i,height:o,fileSize:t.src?this.getDataUrlSize(t.src):0},processedSize:{width:d,height:r,fileSize:p},sizeReduction:p<(t.src?this.getDataUrlSize(t.src):p)?Math.round((1-p/this.getDataUrlSize(t.src))*100):0}}calculateTargetDimensions(t,n,u,i,o){if(o==="stretch")return{width:u,height:i};const d=t/n,r=u/i;return o==="keep_ratio_pad"?d>r?{width:u,height:Math.round(u/d)}:{width:Math.round(i*d),height:i}:o==="keep_ratio_crop"?d>r?{width:Math.round(i*d),height:i}:{width:u,height:Math.round(u/d)}:{width:u,height:i}}drawImageWithMode(t,n,u,i){const o=t.width,d=t.height;if(n==="stretch")this.ctx.drawImage(t,0,0,u,i);else if(n==="keep_ratio_pad"){const r=o/d,f=u/i;let p,c,m,v;r>f?(p=u,c=u/r,m=0,v=(i-c)/2):(p=i*r,c=i,m=(u-p)/2,v=0),this.ctx.drawImage(t,m,v,p,c)}else if(n==="keep_ratio_crop"){const r=o/d,f=u/i;let p,c,m,v;r>f?(v=d,m=d*f,p=(o-m)/2,c=0):(m=o,v=o/f,p=0,c=(d-v)/2),this.ctx.drawImage(t,p,c,m,v,0,0,u,i)}}async optimizeImageQuality(t){const n=t*1024;let u=.9,i=this.canvas.toDataURL("image/jpeg",u),o=this.getDataUrlSize(i);if(o<=n)return i;let d=.1,r=.9,f=null;for(;r-d>.01;)u=(d+r)/2,i=this.canvas.toDataURL("image/jpeg",u),o=this.getDataUrlSize(i),o<=n?(f=i,d=u):r=u;return f||this.canvas.toDataURL("image/jpeg",.1)}getDataUrlSize(t){const n=t.split(",")[1];return Math.round(n.length*.75)}generateFileName(t,n={}){const{format:u,suffix:i="_processed",useWasm:o}=n,d=t.replace(/\.[^/.]+$/,"");let r=".jpg",f=i;if(o&&(f+="_wasm"),u)switch(u){case"image/png":r=".png";break;case"image/webp":r=".webp";break;case"image/avif":r=".avif";break;case"image/jpeg":default:r=".jpg";break}const p=new Date().getTime();return`${d}${f}_${p}${r}`}async batchProcessImages(t,n,u){const i=[],o=t.length,d=n.concurrency||3;if(d>1&&o>1)return this.batchProcessConcurrent(t,n,u,d);for(let r=0;r<t.length;r++)try{const f=await this.processImage(t[r],n);i.push({success:!0,file:t[r],result:f,index:r}),u&&u({processed:r+1,total:t.length,progress:(r+1)/t.length,currentFile:t[r].name,results:i})}catch(f){console.error(`\u5904\u7406\u6587\u4EF6 ${t[r].name} \u65F6\u51FA\u9519:`,f),i.push({success:!1,file:t[r],error:f.message,index:r})}return i}async batchProcessConcurrent(t,n,u,i){const o=new Array(t.length);let d=0;const r=t.length,f=async(c,m)=>{try{const v=await this.processImage(c,n);o[m]={success:!0,file:c,result:v,index:m}}catch(v){o[m]={success:!1,file:c,error:v.message,index:m}}d++,u&&u({processed:d,total:r,progress:d/r,currentFile:c.name,results:o.filter(v=>v!==void 0)})},p=[];for(let c=0;c<t.length;c+=i){const m=[];for(let v=c;v<Math.min(c+i,t.length);v++)m.push(f(t[v],v));p.push(Promise.all(m))}return await Promise.all(p),o}getCapabilities(){return{wasmEnabled:this.wasmEnabled,workerSupported:typeof Worker<"u",canvasSupported:typeof HTMLCanvasElement<"u",webglSupported:this.checkWebGLSupport(),supportedFormats:["image/jpeg","image/png","image/webp","image/avif"],maxConcurrency:navigator.hardwareConcurrency||4}}checkWebGLSupport(){try{const t=document.createElement("canvas");return!!(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch{return!1}}getMemoryUsage(){const t={jsHeapSizeLimit:0,totalJSHeapSize:0,usedJSHeapSize:0,wasmMemory:0};return performance.memory&&(t.jsHeapSizeLimit=performance.memory.jsHeapSizeLimit,t.totalJSHeapSize=performance.memory.totalJSHeapSize,t.usedJSHeapSize=performance.memory.usedJSHeapSize),this.wasmEnabled&&(t.wasmMemory=Xe.getMemoryUsage()),t}async warmup(){try{const t=document.createElement("canvas");t.width=100,t.height=100;const n=t.getContext("2d");n.fillStyle="#ff0000",n.fillRect(0,0,100,100);const u={width:50,height:50,quality:.8};await this.applyBasicProcessing(t,u),console.log("\u56FE\u50CF\u5904\u7406\u5F15\u64CE\u9884\u70ED\u5B8C\u6210")}catch(t){console.warn("\u56FE\u50CF\u5904\u7406\u5F15\u64CE\u9884\u70ED\u5931\u8D25:",t)}}async cleanup(){try{this.worker&&(this.worker.terminate(),this.worker=null),this.canvas&&(this.canvas=null,this.ctx=null),this.aiEnabled=!1,this.wasmEnabled&&(await Xe.cleanup(),this.wasmEnabled=!1),console.log("\u56FE\u50CF\u5904\u7406\u5668\u8D44\u6E90\u5DF2\u6E05\u7406")}catch(t){console.error("\u6E05\u7406\u56FE\u50CF\u5904\u7406\u5668\u8D44\u6E90\u65F6\u51FA\u9519:",t)}}async reinitialize(){await this.cleanup(),this.initCanvas(),await this.initializeEngines(),await this.warmup()}dispose(){this.cleanup()}}const Ne=new Ta;const Ra={class:"stats-section"},La={class:"stat-number"},Oa={class:"stat-number"},$a={class:"stat-number"},Ha={class:"stat-number"},Ua={class:"main-content"},Na={class:"section-header"},Qa={class:"upload-actions"},ja={class:"config-content"},Wa={key:0,class:"config-row"},Ka={key:2,class:"config-row q-mt-md"},Ja={class:"config-row q-mt-md"},Ga={class:"process-button-container"},Xa={key:0,class:"progress-section"},Ya={class:"progress-info"},Za={class:"section-header"},en={key:0,class:"file-list"},tn={class:"file-preview"},ln=["src","alt","onClick"],an={class:"file-info"},nn=["title"],on={class:"file-details"},un={key:1,class:"output-content empty-state"},rn={class:"text-h6"},sn={__name:"IndexPage",setup(e){const t=ma(),n=q([]),u=q(!1),i=q(0),o=q(0),d=q(0),r=q([]),f=q(!1),p=q(null),c=q(!1),m=q(null),v=q(800),C=q(600),M=q("custom"),D=q(80),b=q("keep_ratio_pad"),L=q(300),K=[{label:"\u4FDD\u6301\u6BD4\u4F8B\u586B\u5145",value:"keep_ratio_pad"},{label:"\u4FDD\u6301\u6BD4\u4F8B\u88C1\u526A",value:"keep_ratio_crop"},{label:"\u62C9\u4F38\u586B\u5145",value:"stretch"}],V=()=>{m.value.click()},F=w=>{const a=Array.from(w.target.files);X(a)},X=w=>{const a=w.filter(I=>/\.(jpg|jpeg|png|bmp|gif|webp)$/i.test(I.name)),s=new Set(n.value.map(I=>I.name)),_=a.filter(I=>!s.has(I.name));n.value=[...n.value,..._],_.length>0&&t.notify({type:"positive",message:`\u5DF2\u6DFB\u52A0 ${_.length} \u4E2A\u56FE\u7247\u6587\u4EF6`,position:"top",timeout:2e3})},O=w=>{w.preventDefault(),c.value=!1;const a=Array.from(w.dataTransfer.files);X(a)},j=w=>{w.preventDefault(),c.value=!0},ee=w=>{w.preventDefault(),c.value=!1},ae=()=>{const w=document.createElement("input");w.type="file",w.webkitdirectory=!0,w.multiple=!0,w.accept=".jpg,.jpeg,.png,.bmp,.gif,.webp",w.onchange=a=>{const s=Array.from(a.target.files);X(s)},w.click()},J=async()=>{if(n.value.length===0){t.notify({type:"warning",message:"\u8BF7\u5148\u9009\u62E9\u8981\u5904\u7406\u7684\u56FE\u7247\u6587\u4EF6",position:"top",timeout:3e3});return}u.value=!0,o.value=0,d.value=n.value.length,i.value=0;const w={resizeOption:M.value,resizePercentage:D.value,targetWidth:v.value,targetHeight:C.value,resizeMode:b.value,maxFileSize:L.value,concurrency:4,useWasm:!1};try{for(let a=0;a<n.value.length&&u.value;a++){const s=n.value[a],_=await Ne.processImage(s,w);r.value.push(_),o.value++,i.value=o.value/d.value}u.value&&(n.value=[],t.notify({type:"positive",message:`\u6210\u529F\u5904\u7406 ${o.value} \u5F20\u56FE\u7247`,position:"top",timeout:3e3}))}catch(a){console.error("\u5904\u7406\u5931\u8D25:",a),t.notify({type:"negative",message:`\u5904\u7406\u5931\u8D25: ${a.message}`,position:"top",timeout:5e3})}finally{u.value=!1}},oe=()=>{u.value=!1,t.notify({type:"info",message:"\u5904\u7406\u5DF2\u505C\u6B62",position:"top",timeout:2e3})},x=w=>{p.value=w,f.value=!0},Q=w=>{if(!w||!w.dataUrl){t.notify({type:"warning",message:"\u56FE\u7247\u6570\u636E\u65E0\u6548",position:"top",timeout:2e3});return}const a=document.createElement("a");a.download=w.name,a.href=w.dataUrl,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),t.notify({type:"positive",message:`\u6B63\u5728\u4E0B\u8F7D: ${w.name}`,position:"top",timeout:2e3})},Y=()=>{if(r.value.length===0){t.notify({type:"warning",message:"\u6CA1\u6709\u53EF\u4E0B\u8F7D\u7684\u56FE\u7247",position:"top",timeout:2e3});return}r.value.forEach((w,a)=>{setTimeout(()=>{Q(w)},a*200)}),t.notify({type:"positive",message:`\u5F00\u59CB\u4E0B\u8F7D ${r.value.length} \u5F20\u56FE\u7247`,position:"top",timeout:3e3})},se=w=>{r.value.splice(w,1),t.notify({type:"info",message:"\u6587\u4EF6\u5DF2\u5220\u9664",position:"top",timeout:1e3})},Z=()=>{r.value=[],t.notify({type:"info",message:"\u5DF2\u5904\u7406\u6587\u4EF6\u5DF2\u6E05\u7A7A",position:"top",timeout:2e3})},be=()=>r.value.length===0?0:r.value.reduce((w,a)=>w+(a.processedSize?a.processedSize.fileSize:0),0),ce=w=>{if(w===0)return"0 Bytes";const a=1024,s=["Bytes","KB","MB","GB"],_=Math.floor(Math.log(w)/Math.log(a));return parseFloat((w/Math.pow(a,_)).toFixed(2))+" "+s[_]},ne=w=>{const a=w.split(".").pop().toUpperCase();return a==="JPG"?"JPEG":a};return Kt(async()=>{try{await Ne.warmup(),t.notify({type:"positive",message:"\u56FE\u50CF\u5904\u7406\u5F15\u64CE\u5DF2\u5C31\u7EEA",timeout:2e3})}catch(w){console.warn("\u5904\u7406\u5668\u9884\u70ED\u5931\u8D25:",w)}}),lt(async()=>{u.value&&(u.value=!1),Ne&&(await Ne.cleanup(),Ne.dispose()),r.value.forEach(w=>{w.dataUrl&&w.dataUrl.startsWith("blob:")&&URL.revokeObjectURL(w.dataUrl)}),r.value=[]}),(w,a)=>(le(),xe(va,{class:"image-processor-page"},{default:G(()=>[a[18]||(a[18]=A("div",{class:"page-header"},[A("h1",{class:"page-title"},"\u73B0\u4EE3\u56FE\u50CF\u5904\u7406\u5DE5\u5177"),A("p",{class:"page-subtitle"},"\u9AD8\u6548\u3001\u667A\u80FD\u7684\u6279\u91CF\u56FE\u50CF\u5904\u7406\u89E3\u51B3\u65B9\u6848")],-1)),A("div",Ra,[P(ye,{flat:"",class:"stat-card"},{default:G(()=>[A("div",La,ue(o.value),1),a[7]||(a[7]=A("div",{class:"stat-label"},"\u5DF2\u5904\u7406",-1))]),_:1,__:[7]}),P(ye,{flat:"",class:"stat-card"},{default:G(()=>[A("div",Oa,ue(n.value.length),1),a[8]||(a[8]=A("div",{class:"stat-label"},"\u5F85\u5904\u7406",-1))]),_:1,__:[8]}),P(ye,{flat:"",class:"stat-card"},{default:G(()=>[A("div",$a,ue(ce(be())),1),a[9]||(a[9]=A("div",{class:"stat-label"},"\u603B\u5927\u5C0F",-1))]),_:1,__:[9]}),P(ye,{flat:"",class:"stat-card"},{default:G(()=>[A("div",Ha,ue(Math.round(i.value*100))+"%",1),a[10]||(a[10]=A("div",{class:"stat-label"},"\u8FDB\u5EA6",-1))]),_:1,__:[10]})]),A("div",Ua,[P(ye,{flat:"",class:"content-panel"},{default:G(()=>[A("div",Na,[P(pe,{name:"upload_file",class:"section-icon"}),a[11]||(a[11]=A("h2",{class:"section-title"},"\u4E0A\u4F20\u4E0E\u914D\u7F6E",-1))]),A("div",{class:Xl(["upload-zone",{"drag-active":c.value}]),onDrop:O,onDragover:j,onDragleave:ee,onClick:V},[P(pe,{name:"cloud_upload",size:"48px",class:"upload-icon"}),a[12]||(a[12]=A("div",{class:"upload-text"},"\u62D6\u62FD\u6587\u4EF6\u6216\u70B9\u51FB\u9009\u62E9",-1)),a[13]||(a[13]=A("div",{class:"upload-hint"},"\u652F\u6301PNG, JPG, WebP\u7B49\u683C\u5F0F",-1))],34),A("div",Qa,[P(ve,{unelevated:"",color:"primary",icon:"add_photo_alternate",label:"\u9009\u62E9\u56FE\u7247",onClick:V,class:"upload-btn"}),P(ve,{outline:"",color:"primary",icon:"folder_open",label:"\u9009\u62E9\u6587\u4EF6\u5939",onClick:ae,class:"upload-btn"})]),P(Yl,{class:"q-my-md"}),A("div",ja,[M.value==="custom"?(le(),De("div",Wa,[P(Ge,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=s=>v.value=s),modelModifiers:{number:!0},type:"number",outlined:"",dense:"",label:"\u5BBD\u5EA6 (px)"},null,8,["modelValue"]),P(Ge,{modelValue:C.value,"onUpdate:modelValue":a[1]||(a[1]=s=>C.value=s),modelModifiers:{number:!0},type:"number",outlined:"",dense:"",label:"\u9AD8\u5EA6 (px)"},null,8,["modelValue"])])):Te("",!0),M.value==="custom"?(le(),xe(Ma,{key:1,modelValue:b.value,"onUpdate:modelValue":a[2]||(a[2]=s=>b.value=s),options:K,outlined:"",dense:"",label:"\u8C03\u6574\u6A21\u5F0F","emit-value":"","map-options":"",class:"q-mt-md"},null,8,["modelValue"])):Te("",!0),P(Zl,{modelValue:M.value,"onUpdate:modelValue":a[3]||(a[3]=s=>M.value=s),options:[{label:"\u6307\u5B9A\u5C3A\u5BF8",value:"custom"},{label:"\u4FDD\u6301\u539F\u59CB\u5C3A\u5BF8",value:"original"},{label:"\u767E\u5206\u6BD4\u7F29\u653E",value:"percentage"}],color:"primary",inline:""},null,8,["modelValue"]),M.value==="percentage"?(le(),De("div",Ka,[P(Ge,{modelValue:D.value,"onUpdate:modelValue":a[4]||(a[4]=s=>D.value=s),modelModifiers:{number:!0},type:"number",outlined:"",dense:"",label:"\u7F29\u653E\u6BD4\u4F8B (%)"},null,8,["modelValue"])])):Te("",!0),A("div",Ja,[P(Ge,{modelValue:L.value,"onUpdate:modelValue":a[5]||(a[5]=s=>L.value=s),modelModifiers:{number:!0},type:"number",outlined:"",dense:"",label:"\u6587\u4EF6\u5927\u5C0F\u9650\u5236 (KB)",min:"50",max:"5000",hint:"\u9ED8\u8BA4300KB\uFF0C\u8303\u56F450-5000KB"},null,8,["modelValue"])])]),A("div",Ga,[u.value?(le(),xe(ve,{key:1,outline:"",color:"negative",icon:"stop",label:"\u505C\u6B62\u5904\u7406",onClick:oe,class:"process-btn",size:"lg"})):(le(),xe(ve,{key:0,unelevated:"",color:"positive",icon:"play_arrow",label:"\u5F00\u59CB\u5904\u7406",disable:n.value.length===0,onClick:J,class:"process-btn",size:"lg"},null,8,["disable"]))]),u.value?(le(),De("div",Xa,[A("div",Ya,[A("span",null,"\u5904\u7406\u8FDB\u5EA6: "+ue(o.value)+"/"+ue(d.value),1),A("span",null,ue(Math.round(i.value*100))+"%",1)]),P(Aa,{value:i.value,color:"positive",size:"10px",rounded:""},null,8,["value"])])):Te("",!0)]),_:1}),P(ye,{flat:"",class:"content-panel"},{default:G(()=>[A("div",Za,[P(pe,{name:"collections",class:"section-icon"}),a[15]||(a[15]=A("h2",{class:"section-title"},"\u5904\u7406\u7ED3\u679C",-1)),P(fa),r.value.length>0?(le(),xe(ve,{key:0,flat:"",color:"primary",icon:"download",label:"\u5168\u90E8\u4E0B\u8F7D",onClick:Y})):Te("",!0),r.value.length>0?(le(),xe(ve,{key:1,flat:"",color:"negative",icon:"delete_sweep",onClick:Z},{default:G(()=>[P(da,null,{default:G(()=>a[14]||(a[14]=[ea("\u6E05\u7A7A\u5217\u8868",-1)])),_:1,__:[14]})]),_:1})):Te("",!0)]),r.value.length>0?(le(),De("div",en,[(le(!0),De(ta,null,la(r.value,(s,_)=>(le(),xe(ye,{key:_,class:"file-item"},{default:G(()=>[A("div",tn,[A("img",{src:s.dataUrl,alt:s.name,class:"file-thumbnail",onClick:I=>x(s)},null,8,ln)]),A("div",an,[A("div",{class:"file-name",title:s.name},ue(s.name),9,nn),A("div",on,[A("span",null,ue(s.processedSize?`${s.processedSize.width}\xD7${s.processedSize.height}`:""),1),A("span",null,ue(ne(s.name)),1)])]),P(At,{class:"file-actions"},{default:G(()=>[P(ve,{flat:"",round:"",dense:"",icon:"visibility",onClick:I=>x(s)},null,8,["onClick"]),P(ve,{flat:"",round:"",dense:"",icon:"download",onClick:I=>Q(s)},null,8,["onClick"]),P(ve,{flat:"",round:"",dense:"",icon:"delete",onClick:I=>se(_)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))])):(le(),De("div",un,[P(pe,{name:"photo_library",class:"empty-icon"}),a[16]||(a[16]=A("div",{class:"empty-text"},"\u6682\u65E0\u5904\u7406\u5B8C\u6210\u7684\u6587\u4EF6",-1)),a[17]||(a[17]=A("div",{class:"empty-hint"},"\u5904\u7406\u7ED3\u679C\u5C06\u5728\u8FD9\u91CC\u663E\u793A",-1))]))]),_:1})]),A("input",{ref_key:"fileInput",ref:m,type:"file",multiple:"",accept:".jpg,.jpeg,.png,.bmp,.gif,.webp",style:{display:"none"},onChange:F},null,544),P(jt,{modelValue:f.value,"onUpdate:modelValue":a[6]||(a[6]=s=>f.value=s),class:"preview-dialog"},{default:G(()=>[P(ye,{class:"preview-card"},{default:G(()=>[P(Pa,{src:p.value.dataUrl,class:"preview-image"},null,8,["src"]),P(aa,{class:"text-center"},{default:G(()=>[A("div",rn,ue(p.value.name),1)]),_:1}),P(At,{align:"right"},{default:G(()=>[na(P(ve,{flat:"",label:"\u5173\u95ED",color:"primary"},null,512),[[Fa]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1,__:[18]}))}};var hn=Gl(sn,[["__scopeId","data-v-028c3884"]]);export{hn as default};
