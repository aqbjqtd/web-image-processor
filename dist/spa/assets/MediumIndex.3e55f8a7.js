import{_ as z,r as _,C as m,D as F,E as d,aE as o,F as a,aP as C,Q as k,H as g,aG as b,aJ as I,aF as v,aN as B,aO as Q,aL as w}from"./index.80d4ac4e.js";import{Q as S}from"./QSpace.b0e28ce6.js";import{Q as M}from"./QPage.a22494d8.js";import{u as L}from"./use-quasar.552bfc48.js";const N={name:"MediumIndex",setup(){const r=L(),s=_([]),p=_([]),e=_(null),h=()=>{e.value.click()},y=t=>{const l=Array.from(t.target.files);i(l)},i=t=>{const l=t.filter(c=>/\.(jpg|jpeg|png|bmp|gif|webp)$/i.test(c.name)),f=new Set(s.value.map(c=>c.name)),n=l.filter(c=>!f.has(c.name));s.value=[...s.value,...n],n.length>0&&r.notify({type:"positive",message:`\u5DF2\u6DFB\u52A0 ${n.length} \u4E2A\u56FE\u7247\u6587\u4EF6`,position:"top",timeout:2e3})};return{fileList:s,processedImages:p,fileInput:e,triggerFileSelect:h,onFileInputChange:y,addFiles:i,removeFile:t=>{s.value.splice(t,1),r.notify({type:"info",message:"\u6587\u4EF6\u5DF2\u79FB\u9664",position:"top",timeout:1e3})},processFiles:async()=>{r.notify({type:"ongoing",message:"\u6B63\u5728\u5904\u7406\u6587\u4EF6...",position:"top"}),await new Promise(t=>setTimeout(t,2e3)),p.value=[...s.value],s.value=[],r.notify({type:"positive",message:`\u5DF2\u6210\u529F\u5904\u7406 ${p.value.length} \u4E2A\u6587\u4EF6`,position:"top",timeout:3e3})},formatFileSize:t=>{if(t===0)return"0 Bytes";const l=1024,f=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(l));return parseFloat((t/Math.pow(l,n)).toFixed(2))+" "+f[n]}}}},j={class:"main-container"},E={class:"upload-section"},P={key:0,class:"process-section"},V={class:"file-list-header"},q={class:"file-list"},D={class:"file-info"},G={class:"file-name"},A={class:"file-size"};function H(r,s,p,e,h,y){return m(),F(M,{class:"modern-dashboard"},{default:d(()=>[o("div",j,[o("div",E,[a(b,{flat:"",class:"upload-card"},{default:d(()=>[a(C,{class:"upload-content"},{default:d(()=>[a(k,{name:"cloud_upload",size:"xl",color:"primary"}),s[1]||(s[1]=o("h2",{class:"upload-title"},"\u62D6\u653E\u6587\u4EF6\u5230\u6B64\u5904\u6216",-1)),a(g,{unelevated:"",color:"primary",icon:"add_photo_alternate",label:"\u9009\u62E9\u56FE\u7247\u6587\u4EF6",onClick:e.triggerFileSelect,class:"upload-btn",size:"lg"},null,8,["onClick"])]),_:1,__:[1]})]),_:1})]),e.fileList.length>0?(m(),I("div",P,[o("div",V,[o("h3",null,"\u5F85\u5904\u7406\u6587\u4EF6 ("+v(e.fileList.length)+")",1),a(g,{unelevated:"",color:"positive",icon:"play_arrow",label:"\u5F00\u59CB\u5904\u7406",onClick:e.processFiles,disable:e.fileList.length===0,class:"process-btn"},null,8,["onClick","disable"])]),o("div",q,[(m(!0),I(B,null,Q(e.fileList,(i,u)=>(m(),F(b,{key:u,class:"file-item"},{default:d(()=>[a(C,{horizontal:""},{default:d(()=>[a(k,{name:"image",size:"md",color:"primary",class:"q-mr-md"}),o("div",D,[o("div",G,v(i.name),1),o("div",A,v(e.formatFileSize(i.size)),1)]),a(S),a(g,{flat:"",round:"",icon:"close",onClick:x=>e.removeFile(u),class:"remove-btn"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))])])):w("",!0),o("input",{ref:"fileInput",type:"file",multiple:"",accept:".jpg,.jpeg,.png,.bmp,.gif,.webp",style:{display:"none"},onChange:s[0]||(s[0]=(...i)=>e.onFileInputChange&&e.onFileInputChange(...i))},null,544)])]),_:1})}var U=z(N,[["render",H],["__scopeId","data-v-2fb07013"]]);export{U as default};
